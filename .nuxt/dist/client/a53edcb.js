(window.webpackJsonp=window.webpackJsonp||[]).push([[45],{598:function(t,r,e){"use strict";e.r(r);var o,n,m=e(34),l=(e(103),e(102)),c=e.n(l),f={name:"editar",middleware:"login",data:function(){return{form:{nombre:"",descripcion:"",precio:0,categoria:"",bpm:"",escala:"",miniatura:null,mp3:null,wav:null,sample:null},views:{minuatura:null,mp3:null,wav:null,sample:null}}},components:{},mounted:function(){this.load()},methods:{load:function(){var t=this;c.a.get("http://localhost:3000/instrumental/".concat(this.$route.params.id)).then((function(r){if(200==r.status){var data=r.data;t.form.nombre=data.nombre,t.form.descripcion=data.descripcion,t.form.precio=data.precio,t.form.categoria=data.categoria,t.form.bpm=data.bpm,t.form.escala=data.escala,t.views.minuatura=data.tieneMiniatura.url,t.views.mp3=data.tieneMp3.url,t.views.wav=data.tieneWav.url,t.views.sample=data.tieneSample.url}})).catch((function(t){console.log(t)}))},validar:function(){return""!=this.form.nombre||""!=this.form.descripcion||""!=this.form.precio||""!=this.form.categoria||""!=this.form.bpm||""!=this.form.escala||this.form.minuatura||this.form.mp3||this.form.wav},edit:(n=Object(m.a)(regeneratorRuntime.mark((function t(){var r,e,o,data,n=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.validar()){t.next=20;break}if(!this.form.miniatura){t.next=6;break}return t.next=4,this.loadFile("miniatura","http://localhost:3000/upload/miniatura",this.form.miniatura);case 4:r=t.sent,this.form.miniatura=r.id;case 6:if(!this.form.mp3){t.next=11;break}return t.next=9,this.loadFile("mp3","http://localhost:3000/upload/mp3",this.form.mp3);case 9:e=t.sent,this.form.mp3=e.id;case 11:if(!this.form.wav){t.next=16;break}return t.next=14,this.loadFile("wav","http://localhost:3000/upload/wav",this.form.wav);case 14:o=t.sent,this.form.wav=o.id;case 16:data={nombre:this.form.nombre,descripcion:this.form.descripcion,precio:this.form.precio,categoria:this.form.categoria,miniatura:this.form.miniatura,bpm:this.form.bpm,escala:this.form.escala,mp3:this.form.mp3,wav:this.form.wav,licencia:1},c.a.put("http://localhost:3000/instrumental/".concat(this.$route.params.id),data,{headers:{"access-token":this.$cookiz.get("usuario").token,"Content-Type":"application/json"}}).then((function(t){200==t.status&&n.$router.push("../")})).catch((function(t){console.log(t)})),t.next=20;break;case 20:case"end":return t.stop()}}),t,this)}))),function(){return n.apply(this,arguments)}),loadFile:(o=Object(m.a)(regeneratorRuntime.mark((function t(r,e,o){var n,form;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=null,(form=new FormData).append(r,o),t.prev=3,t.next=6,c.a.post(e,form,{headers:{"Content-Type":"multipart/form-data","access-token":this.$cookiz.get("usuario").token}});case 6:n=(n=t.sent).data,t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),console.log(t.t0);case 13:return console.log(n),t.abrupt("return",n);case 15:case"end":return t.stop()}}),t,this,[[3,10]])}))),function(t,r,e){return o.apply(this,arguments)})}},h=f,d=e(54),component=Object(d.a)(h,(function(){var t=this,r=t._self._c;return r("div",[r("b-container",[r("b-form",[r("b-form-group",{attrs:{label:"Nombre"}},[r("b-form-input",{attrs:{type:"text"},model:{value:t.form.nombre,callback:function(r){t.$set(t.form,"nombre",r)},expression:"form.nombre"}})],1),t._v(" "),r("b-form-group",{attrs:{label:"Descripcion"}},[r("b-form-textarea",{model:{value:t.form.descripcion,callback:function(r){t.$set(t.form,"descripcion",r)},expression:"form.descripcion"}})],1),t._v(" "),r("b-form-group",{attrs:{label:"Precio"}},[r("b-form-input",{attrs:{type:"number"},model:{value:t.form.precio,callback:function(r){t.$set(t.form,"precio",r)},expression:"form.precio"}})],1),t._v(" "),r("b-row",[r("b-col",{attrs:{sm:""}},[r("b-form-group",{attrs:{label:"Categoria"}},[r("b-form-input",{attrs:{type:"text"},model:{value:t.form.categoria,callback:function(r){t.$set(t.form,"categoria",r)},expression:"form.categoria"}})],1)],1),t._v(" "),r("b-col",{attrs:{sm:""}},[r("b-form-group",{attrs:{label:"BPM"}},[r("b-form-input",{attrs:{type:"text"},model:{value:t.form.bpm,callback:function(r){t.$set(t.form,"bpm",r)},expression:"form.bpm"}})],1)],1),t._v(" "),r("b-col",{attrs:{sm:""}},[r("b-form-group",{attrs:{label:"Escala"}},[r("b-form-input",{attrs:{type:"text"},model:{value:t.form.escala,callback:function(r){t.$set(t.form,"escala",r)},expression:"form.escala"}})],1)],1)],1),t._v(" "),r("b-row",[r("b-col",{attrs:{sm:""}},[r("b-form-group",{attrs:{label:"Minuatura"}},[r("b-img",{attrs:{thumbnail:"",src:t.views.minuatura}})],1)],1),t._v(" "),r("b-col",{attrs:{sm:""}},[r("b-form-group",{attrs:{label:"Mp3"}},[r("audio",{attrs:{src:t.views.mp3,controls:""}})])],1),t._v(" "),r("b-col",{attrs:{sm:""}},[r("b-form-group",{attrs:{label:"Wav"}},[r("audio",{attrs:{src:t.views.wav,controls:""}})])],1)],1),t._v(" "),r("b-row",[r("b-col",{attrs:{sm:""}},[r("b-form-group",{attrs:{label:"Minuatura"}},[r("b-form-file",{attrs:{placeholder:"agrege una minuatura",accept:".png, .jpg"},model:{value:t.form.miniatura,callback:function(r){t.$set(t.form,"miniatura",r)},expression:"form.miniatura"}})],1)],1),t._v(" "),r("b-col",{attrs:{sm:""}},[r("b-form-group",{attrs:{label:"Mp3"}},[r("b-form-file",{attrs:{placeholder:"Agregar el MP3 aqui","drop-placeholder":"",accept:".mp3"},model:{value:t.form.mp3,callback:function(r){t.$set(t.form,"mp3",r)},expression:"form.mp3"}})],1)],1),t._v(" "),r("b-col",{attrs:{sm:""}},[r("b-form-group",{attrs:{label:"Wav"}},[r("b-form-file",{attrs:{placeholder:"Agregar el WAV aqui","drop-placeholder":"",accept:".wav"},model:{value:t.form.wav,callback:function(r){t.$set(t.form,"wav",r)},expression:"form.wav"}})],1)],1)],1),t._v(" "),r("hr"),t._v(" "),r("b-form-group",[r("b-button",{staticClass:"btn boton",on:{click:t.edit}},[t._v("Editar")])],1)],1)],1)],1)}),[],!1,null,null,null);r.default=component.exports}}]);